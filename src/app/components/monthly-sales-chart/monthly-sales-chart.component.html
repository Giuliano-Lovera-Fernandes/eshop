<ion-content class="ion-padding">
  <div style="text-align: center;">
    <ion-header>
      <ion-toolbar color="primary">
        <ion-title>Relatório de Vendas</ion-title>
      </ion-toolbar>
    </ion-header>

    <div style="display: flex; justify-content: center; align-items: flex-start; gap: 40px; padding: 20px;">
      <!-- Estatísticas do Faturamento -->
      <div style="min-width: 250px;">
        <b>Estatísticas do Faturamento</b>
        <table style="margin: 80px 0; border-collapse: collapse;">
          <tr>
            <td style="padding: 6px; text-align: left; font-weight: bold;">Menor Valor:</td>
            <td style="padding: 6px; text-align: left;">{{ menorValor | currency:'BRL':'symbol':'1.2-2' }}</td>
          </tr>
          <tr>
            <td style="padding: 6px; text-align: left; font-weight: bold;">Maior Valor:</td>
            <td style="padding: 6px; text-align: left;">{{ maiorValor | currency:'BRL':'symbol':'1.2-2' }}</td>
          </tr>
          <tr>
            <td style="padding: 6px; text-align: left; font-weight: bold;">Média Mensal:</td>
            <td style="padding: 6px; text-align: left;">{{ mediaMensal | currency:'BRL':'symbol':'1.2-2' }}</td>
          </tr>
          <tr>
            <td style="padding: 6px; text-align: left; font-weight: bold;">Dias Acima da Média:</td>
            <td style="padding: 6px; text-align: left;">{{ diasAcimaDaMedia }}</td>
          </tr>
          <tr>
            <td style="padding: 6px; text-align: left; font-weight: bold;">Total Faturamento Mensal (Vendas por Estado):
            </td>
            <td style="padding: 6px; text-align: left;">{{ totalFaturamento | currency:'BRL':'symbol':'1.2-2' }}</td>
          </tr>
        </table>
      </div>

      <!-- Gráfico -->
      <div>
        <canvas id="myChart" width="1000" height="500"></canvas>
      </div>
    </div>
    <div style="margin-top: 20px;">
      <h5>Percentual de Vendas por Estado</h5>
      <div style="display: flex; justify-content: center; align-items: center;">
      </div>
    </div>
    <h5>Percentuais por Estado:</h5>

    <div style="display: flex; justify-content: center; align-items: flex-start; gap: 40px;">
      <!-- Gráfico -->
      <ion-card>
        <ion-card-content
          style="width: 400px; height: 400px; display: flex; justify-content: center; align-items: center;">
          <canvas id="myPieChart" style="max-width: 100%; height: auto;"></canvas>
        </ion-card-content>
      </ion-card>

      <!-- Lista de percentuais -->
      <div>
        <h5>Percentuais por Estado:</h5>
        <ion-list style="text-align: center;">
          <ion-item *ngFor="let estado of percentuaisPorEstado" lines="none" style="margin: 6px 0; text-align: center;">
            <div style="display: flex; flex-direction: column; align-items: center;">
              <ion-label style="margin-bottom: 4px;">{{ estado.estado }}</ion-label>
              <ion-note>{{ estado.percentual | number:'1.2-2' }}%</ion-note>
            </div>
          </ion-item>
        </ion-list>
      </div>
    </div>
  </div>

  <ion-footer style="margin-bottom:0;">
    <ion-toolbar color="primary" class="text-center">
      <ion-title>Target 2025</ion-title>
    </ion-toolbar>
  </ion-footer>
</ion-content>